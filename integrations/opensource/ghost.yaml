# Ghost Integration Template
name: "Ghost"
type: "rest"
description: "Ghost blog posts and pages"
icon: "ghost"
category: "cms"

auth:
  type: "api_key"
  fields:
    - name: "base_url"
      label: "Ghost URL"
      type: "url"
      required: true
      placeholder: "https://blog.example.com"
    - name: "content_api_key"
      label: "Content API Key"
      type: "password"
      required: true
      help: "Find at Settings > Integrations > Add custom integration"
    - name: "admin_api_key"
      label: "Admin API Key"
      type: "password"
      required: false
      help: "Optional: For accessing draft posts"

endpoints:
  list_posts:
    url: "${base_url}/ghost/api/content/posts/"
    method: "GET"
    params:
      key: "${content_api_key}"
      limit: 100
      include: "tags,authors"
      formats: "html,plaintext"
    pagination:
      type: "page"
      page_param: "page"
      limit_param: "limit"
      results_field: "posts"
      meta_field: "meta.pagination"
  
  list_pages:
    url: "${base_url}/ghost/api/content/pages/"
    method: "GET"
    params:
      key: "${content_api_key}"
      limit: 100
      include: "tags,authors"
  
  get_post:
    url: "${base_url}/ghost/api/content/posts/${id}/"
    method: "GET"
    params:
      key: "${content_api_key}"
      include: "tags,authors"
      formats: "html,plaintext"
  
  list_tags:
    url: "${base_url}/ghost/api/content/tags/"
    method: "GET"
    params:
      key: "${content_api_key}"
      limit: "all"

mapping:
  id: "$.id"
  title: "$.title"
  content: "$.html"
  content_type: "html"
  url: "$.url"
  author: "$.primary_author.name"
  modified: "$.updated_at"
  created: "$.published_at"
  document_type: "post"
  attributes:
    slug: "$.slug"
    feature_image: "$.feature_image"
    featured: "$.featured"
    tags: "$.tags[*].name"
    primary_tag: "$.primary_tag.name"
    reading_time: "$.reading_time"
    excerpt: "$.excerpt"
    custom_excerpt: "$.custom_excerpt"

rate_limit:
  requests_per_minute: 300
  concurrent: 5

features:
  - incremental_sync
  - webhooks
  - tag_filter
  - author_filter
  - published_only

content_types:
  - posts
  - pages

webhook_events:
  - "post.published"
  - "post.updated"
  - "post.deleted"
  - "page.published"

content_processors:
  - name: "html_to_text"
    config:
      preserve_links: true

docs_url: "https://ghost.org/docs/content-api/"
