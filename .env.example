# Beacon Search Environment Configuration
# Copy this file to .env and fill in your values

# ============================================
# DATABASE
# ============================================

# PostgreSQL connection string (with pgvector extension)
DATABASE_URL=postgresql://beacon:beacon_secret@localhost:5432/beacon_search

# ============================================
# SERVER
# ============================================

# Backend API port
PORT=3001

# ============================================
# AI / OPENAI
# ============================================

# Required for RAG query answering (/api/ask endpoint)
# Without this, search works but LLM-powered answers are disabled
OPENAI_API_KEY=sk-...

# OpenAI model for RAG responses (default: gpt-4o-mini)
OPENAI_MODEL=gpt-4o-mini

# ============================================
# PROCESSING (Optional AI Features)
# ============================================

# Enable OCR for images and PDFs (requires tesseract.js, built-in)
ENABLE_OCR=true

# Enable translation (requires OpenAI API key)
ENABLE_TRANSLATION=false

# Enable AI image/audio description (requires OpenAI API key)
ENABLE_AI_DESCRIPTION=false

# ============================================
# CONNECTORS
# ============================================

# Path to config repo for integration templates
CONFIG_REPO_PATH=/app/config-repo

# ============================================
# FRPEI (Federated Retrieval + Enrichment)
# ============================================

SEARXNG_URL=http://10.1.10.143:8080
SEARXNG_TIMEOUT_MS=2500
SEARXNG_LANGUAGE=en
SEARXNG_CATEGORIES=general

BEACON_TIMEOUT_MS=1800
MEDIA_TIMEOUT_MS=2000

FRPEI_CACHE_TTL_MS=300000
FRPEI_BREAKER_FAILURE_THRESHOLD=3
FRPEI_BREAKER_SUCCESS_THRESHOLD=2
FRPEI_BREAKER_RESET_MS=30000

# ============================================
# MEDIA CATALOG (Movies)
# ============================================

# TMDB (or compatible) API access
MOVIE_TMDB_API_KEY=
MOVIE_TMDB_BASE_URL=https://api.themoviedb.org/3
MOVIE_TMDB_IMAGE_BASE_URL=https://image.tmdb.org/t/p/original
MOVIE_PROVIDER_REGION=US

# OMDb fallback (optional)
MOVIE_OMDB_API_KEY=

# Optional transcription hook (local Whisper script)
MOVIE_TRANSCRIBE_SCRIPT=

# ============================================
# FRONTEND (React)
# ============================================

# API URL for frontend to connect to backend
# In Docker, use service name; for dev, use localhost
REACT_APP_API_URL=http://localhost:3001

# Nostr admin authentication (comma-separated npubs)
OWNER_NPUBS=npub1exampleownerreplace
REACT_APP_OWNER_NPUBS=npub1exampleownerreplace
REACT_APP_JWT_SECRET=beacon-dev-secret-change-me

# ============================================
# DOCKER COMPOSE OVERRIDES
# ============================================

# PostgreSQL credentials (used by docker-compose.yml)
POSTGRES_USER=beacon
POSTGRES_PASSWORD=beacon_secret
POSTGRES_DB=beacon_search
